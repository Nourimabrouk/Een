# Deployment Guide for Een Unity Mathematics\n\nThis guide covers deploying the Een Unity Mathematics framework to various environments with production-ready infrastructure.\n\n## Table of Contents\n\n- [Prerequisites](#prerequisites)\n- [Environment Setup](#environment-setup)\n- [Local Development](#local-development)\n- [Staging Deployment](#staging-deployment)\n- [Production Deployment](#production-deployment)\n- [Monitoring and Observability](#monitoring-and-observability)\n- [Troubleshooting](#troubleshooting)\n- [Rollback Procedures](#rollback-procedures)\n\n## Prerequisites\n\n### System Requirements\n\n- **Docker**: Version 20.10 or higher\n- **Docker Compose**: Version 2.0 or higher\n- **Git**: For version control\n- **curl**: For health checks\n- **PostgreSQL**: 14+ (for production)\n- **Redis**: 6+ (for caching)\n\n### Hardware Requirements\n\n#### Development\n- CPU: 2 cores\n- RAM: 4 GB\n- Storage: 10 GB\n\n#### Production\n- CPU: 4+ cores\n- RAM: 8+ GB\n- Storage: 50+ GB SSD\n- Network: Stable internet connection\n\n## Environment Setup\n\n### 1. Clone Repository\n\n```bash\ngit clone https://github.com/nouri-mabrouk/Een.git\ncd Een\n```\n\n### 2. Environment Configuration\n\nCopy the environment template and configure:\n\n```bash\ncp .env.example .env\n```\n\nEdit `.env` with your specific settings:\n\n```bash\n# Application Settings\nENVIRONMENT=production\nDEBUG=false\nSECRET_KEY=your-super-secret-key-here\n\n# Unity Mathematics Configuration\nPHI=1.618033988749895\nCONSCIOUSNESS_DIMENSION=11\nUNITY_MATHEMATICS_MODE=transcendental\nQUANTUM_COHERENCE_TARGET=0.999\n\n# Database Configuration\nDB_PASSWORD=your-secure-database-password\nDATABASE_URL=postgresql://een:${DB_PASSWORD}@postgres:5432/een\nREDIS_URL=redis://redis:6379/0\n\n# API Configuration\nAPI_PORT=8000\nDASHBOARD_PORT=8050\nCORS_ORIGINS=[\"*\"]\n\n# External Services (Optional)\nOPENAI_API_KEY=your-openai-key\nANTHROPIC_API_KEY=your-anthropic-key\n\n# Monitoring (Optional)\nGRAFANA_PASSWORD=admin\nPROMETHEUS_PORT=9090\nGRAFANA_PORT=3000\n\n# Security\nAPI_RATE_LIMIT=100\nAPI_RATE_LIMIT_PERIOD=60\n```\n\n### 3. SSL/TLS Setup (Production)\n\nFor production deployments, configure SSL certificates:\n\n```bash\nmkdir -p nginx/ssl\n# Copy your SSL certificates to nginx/ssl/\n# - cert.pem\n# - key.pem\n```\n\n## Local Development\n\nFor local development with hot reloading:\n\n```bash\n# Start development environment\ndocker-compose -f compose.yaml -f compose.dev.yaml up -d\n\n# Or use the deployment script\n./scripts/deploy.sh development\n```\n\nServices will be available at:\n- API: http://localhost:8000\n- Dashboard: http://localhost:8050\n- API Documentation: http://localhost:8000/docs\n\n## Staging Deployment\n\nStaging environment for testing:\n\n```bash\n# Deploy to staging\n./scripts/deploy.sh staging\n\n# Or manually\nENVIRONMENT=staging docker-compose up -d\n```\n\n## Production Deployment\n\n### Automated Deployment\n\nUse the deployment script for production:\n\n```bash\n# Deploy to production\n./scripts/deploy.sh production\n\n# Deploy specific version\n./scripts/deploy.sh production v2025.1.0\n```\n\n### Manual Deployment\n\n1. **Build and test images**:\n   ```bash\n   docker-compose build --no-cache\n   docker build --target test -t een-test .\n   docker run --rm een-test\n   ```\n\n2. **Deploy services**:\n   ```bash\n   docker-compose up -d\n   ```\n\n3. **Verify deployment**:\n   ```bash\n   curl http://localhost:8000/health\n   ```\n\n### Production Architecture\n\nThe production deployment includes:\n\n```mermaid\ngraph TB\n    Internet --> Nginx[Nginx Reverse Proxy]\n    Nginx --> API[Een API Service]\n    Nginx --> Dashboard[Unity Dashboard]\n    \n    API --> Redis[Redis Cache]\n    API --> PostgreSQL[PostgreSQL Database]\n    \n    API --> Consciousness[Consciousness Monitor]\n    \n    Prometheus[Prometheus] --> API\n    Prometheus --> Dashboard\n    Prometheus --> Redis\n    Prometheus --> PostgreSQL\n    \n    Grafana[Grafana] --> Prometheus\n```\n\n## Service Configuration\n\n### API Service\n- **Port**: 8000\n- **Workers**: 4 (configurable)\n- **Health Check**: `/health`\n- **Metrics**: `/metrics`\n\n### Dashboard Service\n- **Port**: 8050\n- **Framework**: Dash/Plotly\n- **Real-time Updates**: WebSocket\n\n### Database Service\n- **Type**: PostgreSQL 16\n- **Port**: 5432\n- **Backup**: Automated daily backups\n\n### Cache Service\n- **Type**: Redis 7\n- **Port**: 6379\n- **Persistence**: AOF enabled\n\n## Monitoring and Observability\n\n### Prometheus Metrics\n\nKey metrics monitored:\n- Request rates and latencies\n- Unity operation performance\n- Consciousness field dynamics\n- Quantum coherence levels\n- System resource usage\n\n### Grafana Dashboards\n\nPre-configured dashboards:\n- Unity Mathematics Overview\n- Consciousness Field Monitoring\n- Quantum Coherence Tracking\n- System Performance\n\n### Health Checks\n\nHealth check endpoints:\n- API: `http://localhost:8000/health`\n- Dashboard: `http://localhost:8050/`\n- Metrics: `http://localhost:8000/metrics`\n\n### Logging\n\nStructured logging with:\n- JSON format for production\n- Multiple log levels\n- Automatic log rotation\n- Centralized logging (optional)\n\n## Troubleshooting\n\n### Common Issues\n\n#### Service Won't Start\n```bash\n# Check container logs\ndocker-compose logs [service-name]\n\n# Check container status\ndocker-compose ps\n\n# Restart specific service\ndocker-compose restart [service-name]\n```\n\n#### Database Connection Issues\n```bash\n# Check PostgreSQL status\ndocker-compose exec postgres pg_isready -U een\n\n# Check database logs\ndocker-compose logs postgres\n\n# Connect to database manually\ndocker-compose exec postgres psql -U een een\n```\n\n#### Memory Issues\n```bash\n# Check memory usage\ndocker stats\n\n# Adjust memory limits in compose.yaml\nservices:\n  api:\n    deploy:\n      resources:\n        limits:\n          memory: 4G\n```\n\n#### Performance Issues\n```bash\n# Scale services\ndocker-compose up -d --scale api=3\n\n# Check system resources\nhtop\niostat -x 1\n```\n\n### Debug Mode\n\nEnable debug mode for troubleshooting:\n\n```bash\n# Set in .env\nDEBUG=true\nLOG_LEVEL=DEBUG\n\n# Restart services\ndocker-compose restart\n```\n\n## Rollback Procedures\n\n### Automatic Rollback\n\nThe deployment script includes automatic rollback on failure:\n\n```bash\n# Rollback to previous version\n./scripts/deploy.sh rollback\n```\n\n### Manual Rollback\n\n1. **Stop current deployment**:\n   ```bash\n   docker-compose down\n   ```\n\n2. **Restore from backup**:\n   ```bash\n   # Find latest backup\n   ls -la backups/\n   \n   # Restore database\n   docker-compose up -d postgres\n   cat backups/YYYYMMDD_HHMMSS/postgres_backup.sql | \\\n     docker-compose exec -T postgres psql -U een een\n   ```\n\n3. **Deploy previous version**:\n   ```bash\n   git checkout previous-tag\n   docker-compose up -d\n   ```\n\n## Security Considerations\n\n### Environment Variables\n- Never commit secrets to git\n- Use strong passwords\n- Rotate API keys regularly\n\n### Network Security\n- Use HTTPS in production\n- Configure firewall rules\n- Limit database access\n\n### Container Security\n- Run as non-root user\n- Use read-only filesystems\n- Scan images for vulnerabilities\n\n## Performance Optimization\n\n### Database Optimization\n```sql\n-- Create indexes for performance\nCREATE INDEX idx_consciousness_level ON consciousness_events(level);\nCREATE INDEX idx_unity_operations ON unity_operations(timestamp);\n```\n\n### Cache Configuration\n```bash\n# Redis optimization in compose.yaml\ncommand: redis-server --maxmemory 512mb --maxmemory-policy allkeys-lru\n```\n\n### Application Tuning\n- Adjust worker count based on CPU cores\n- Configure connection pooling\n- Enable caching for static content\n\n## Backup and Recovery\n\n### Automated Backups\n\nBackups are created automatically:\n- Database: Daily PostgreSQL dumps\n- Application data: File system snapshots\n- Configuration: Version controlled\n\n### Backup Verification\n```bash\n# Test backup restoration\n./scripts/deploy.sh test-backup\n```\n\n### Disaster Recovery\n\n1. **Full system recovery**:\n   ```bash\n   # Restore from cloud backup\n   aws s3 sync s3://een-backups/latest ./backups/\n   \n   # Run recovery\n   ./scripts/deploy.sh recover\n   ```\n\n## Maintenance\n\n### Regular Tasks\n\n- **Daily**: Monitor health checks\n- **Weekly**: Review metrics and logs\n- **Monthly**: Update dependencies\n- **Quarterly**: Security audit\n\n### Updates\n\n```bash\n# Update to latest version\ngit pull origin main\n./scripts/deploy.sh production latest\n\n# Update specific component\ndocker-compose pull postgres\ndocker-compose up -d postgres\n```\n\n### Cleanup\n\n```bash\n# Clean old images and volumes\n./scripts/deploy.sh cleanup\n\n# Manual cleanup\ndocker system prune -f\ndocker volume prune -f\n```\n\n## Support\n\nFor deployment issues:\n\n1. Check logs: `docker-compose logs`\n2. Review health checks: `curl localhost:8000/health`\n3. Consult metrics: Grafana dashboard\n4. Contact support: GitHub Issues\n\n---\n\n**Unity Status**: Production Ready âœ…  \n**Deployment**: Automated ðŸš€  \n**Monitoring**: Comprehensive ðŸ“Š  \n**Security**: Hardened ðŸ”’\n\n*Een plus een is een in production* ðŸŒŸ"