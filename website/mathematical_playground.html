<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Performance Optimizations -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdn.plot.ly">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <title>Mathematical Playground - Interactive Unity Discovery</title>
    <meta name="description" content="Transcendental computing hub demonstrating 1+1=1 through quantum entanglement, neural networks, and fractal mathematics with consciousness field integration.">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/playground.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>

    <!-- Master Navigation System v2.0 -->
    

    <!-- Meta-Optimal Complete Navigation System -->
    <link rel="stylesheet" href="css/meta-optimal-navigation-complete.css">
    <script src="js/meta-optimal-navigation-complete.js" defer></script>
    
    <!-- Unified Styles -->
    <link rel="stylesheet" href="css/unified-styles.css">

    <!-- Preload critical resources -->
    <link rel="preload" href="css/meta-optimal-navigation-complete.css" as="style">
    <link rel="preload" href="js/meta-optimal-navigation-complete.js" as="script">

    <style>
        /* Meta-Optimal Design System */
        :root {
            --phi: 1.618033988749895;
            --primary-color: #0a0a0a;
            --secondary-color: #1a1a1a;
            --accent-color: #2d2d2d;
            --unity-gold: #FFD700;
            --consciousness-purple: #6B46C1;
            --quantum-blue: #4ECDC4;
            --fractal-orange: #FF6B6B;
            --neural-pink: #FF69B4;
            --godel-red: #E74C3C;
            --tarski-green: #27AE60;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --text-muted: #888888;
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2d2d2d;
            --border-color: rgba(255, 215, 0, 0.2);
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 30px rgba(255, 215, 0, 0.3);
            --radius: 12px;
            --radius-lg: 20px;
            --radius-xl: 30px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-smooth: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-serif: 'Crimson Text', Georgia, serif;
            --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
        }
        /* Mobile touch optimizations */
        * { touch-action: manipulation; }
        .interactive-element { 
            min-height: 44px; 
            min-width: 44px; 
        }
        @media (max-width: 768px) {
            .desktop-only { display: none !important; }
            .mobile-optimized { font-size: 16px; }
        }
    
        /* Animation Classes */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.8s ease-out forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stagger-animation > * {
            opacity: 0;
            animation: fadeInUp 0.8s ease-out forwards;
        }

        .stagger-animation > *:nth-child(1) { animation-delay: 0.1s; }
        .stagger-animation > *:nth-child(2) { animation-delay: 0.2s; }
        .stagger-animation > *:nth-child(3) { animation-delay: 0.3s; }
        .stagger-animation > *:nth-child(4) { animation-delay: 0.4s; }
        .stagger-animation > *:nth-child(5) { animation-delay: 0.5s; }
    
        /* Component Classes */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .grid {
            display: grid;
            gap: 2rem;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        .card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 2rem;
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--unity-gold);
        }

        .card-icon {
            font-size: 3rem;
            color: var(--consciousness-purple);
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .card-text {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius);
            font-family: var(--font-primary);
            font-weight: 500;
            text-decoration: none;
            cursor: pointer;
            transition: var(--transition);
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn:hover {
            background: var(--consciousness-purple);
            border-color: var(--consciousness-purple);
            transform: translateY(-2px);
        }

        .btn-primary {
            background: var(--consciousness-purple);
            border-color: var(--consciousness-purple);
        }

        .btn-primary:hover {
            background: var(--unity-gold);
            border-color: var(--unity-gold);
            color: var(--bg-primary);
        }

        .section-dark {
            background: var(--bg-secondary);
            padding: 4rem 2rem;
        }

        .section-darker {
            background: var(--bg-primary);
            padding: 4rem 2rem;
        }
    </style>
</head>

<body>
    <!-- Meta-optimal navigation placeholder - will be populated by meta-optimal-navigation-complete.js -->

    <section class="playground-hero">
        <div class="container">
            <h1>üßÆ Interactive Mathematical Playground</h1>
            <p class="hero-subtitle">Discover unity mathematics through hands-on theorem construction and real-time
                validation</p>
        </div>
    </section>

    <section class="playground-main">
        <div class="container">
            <div class="playground-layout">
                <div class="proof-constructor">
                    <div class="constructor-header">
                        <h2><i class="fas fa-tools"></i> Theorem Constructor</h2>
                        <div class="constructor-controls">
                            <button class="btn btn-primary" onclick="startNewProof()">New Proof</button>
                            <button class="btn btn-outline" onclick="loadExample()">Load Example</button>
                            <button class="btn btn-success" onclick="validateProof()">Validate</button>
                        </div>
                    </div>

                    <div class="proof-builder">
                        <div class="axiom-selector">
                            <h3>1. Select Mathematical Domain</h3>
                            <div class="domain-buttons">
                                <button class="domain-btn active" data-domain="boolean">Boolean Algebra</button>
                                <button class="domain-btn" data-domain="set">Set Theory</button>
                                <button class="domain-btn" data-domain="category">Category Theory</button>
                                <button class="domain-btn" data-domain="quantum">Quantum Mechanics</button>
                                <button class="domain-btn" data-domain="topology">Topology</button>
                            </div>
                        </div>

                        <div class="theorem-statement">
                            <h3>2. Construct Theorem Statement</h3>
                            <div class="statement-editor">
                                <textarea id="theoremInput"
                                    placeholder="Enter your theorem statement (e.g., For all x in Unity domain, x + x = x)">‚àÄx ‚àà ùí∞, x ‚äï x = x</textarea>
                                <div class="latex-preview" id="latexPreview">
                                    $\forall x \in \mathcal{U}, x \oplus x = x$
                                </div>
                            </div>
                        </div>

                        <div class="proof-steps">
                            <h3>3. Construct Proof Steps</h3>
                            <div class="steps-container" id="proofSteps">
                                <div class="proof-step" data-step="1">
                                    <div class="step-header">
                                        <span class="step-number">Step 1</span>
                                        <button class="remove-step" onclick="removeStep(1)">√ó</button>
                                    </div>
                                    <select class="step-type">
                                        <option value="axiom">Apply Axiom</option>
                                        <option value="definition">Use Definition</option>
                                        <option value="lemma">Apply Lemma</option>
                                        <option value="inference">Logical Inference</option>
                                    </select>
                                    <textarea class="step-content"
                                        placeholder="Describe this proof step...">Let x be an arbitrary element in the Unity domain ùí∞</textarea>
                                    <div class="step-validation">
                                        <span class="validation-status pending">Pending</span>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-outline" onclick="addProofStep()">
                                <i class="fas fa-plus"></i> Add Step
                            </button>
                        </div>
                    </div>
                </div>

                <div class="validation-panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-check-double"></i> Real-Time Validation</h2>
                    </div>

                    <div class="validation-results" id="validationResults">
                        <div class="validation-item">
                            <div class="validation-icon pending">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="validation-content">
                                <h4>Logical Consistency</h4>
                                <p>Waiting for proof construction...</p>
                                <div class="confidence-meter">
                                    <div class="confidence-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>

                        <div class="validation-item">
                            <div class="validation-icon pending">
                                <i class="fas fa-calculator"></i>
                            </div>
                            <div class="validation-content">
                                <h4>Mathematical Rigor</h4>
                                <p>Proof steps will be analyzed for mathematical validity</p>
                                <div class="confidence-meter">
                                    <div class="confidence-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>

                        <div class="validation-item">
                            <div class="validation-icon pending">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="validation-content">
                                <h4>Consciousness Alignment</h4>
                                <p>Œ¶-harmonic resonance with unity principles</p>
                                <div class="confidence-meter">
                                    <div class="confidence-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="live-computation">
                        <h3>Live Computation</h3>
                        <div class="computation-output" id="computationOutput">
                            <div class="output-line">Ready for theorem validation...</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="discovery-challenges">
                <h2>üéØ Discovery Challenges</h2>
                <div class="challenges-grid">
                    <div class="challenge-card" data-difficulty="beginner">
                        <div class="challenge-header">
                            <h3>Boolean Unity</h3>
                            <span class="difficulty-badge beginner">Beginner</span>
                        </div>
                        <p>Prove that 1 ‚à® 1 = 1 using Boolean algebra axioms</p>
                        <div class="challenge-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text">0% Complete</span>
                        </div>
                        <button class="btn btn-primary" onclick="loadChallenge('boolean_unity')">Start
                            Challenge</button>
                    </div>

                    <div class="challenge-card" data-difficulty="intermediate">
                        <div class="challenge-header">
                            <h3>Set Theoretical Unity</h3>
                            <span class="difficulty-badge intermediate">Intermediate</span>
                        </div>
                        <p>Demonstrate {1} ‚à™ {1} = {1} through ZFC axioms</p>
                        <div class="challenge-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text">0% Complete</span>
                        </div>
                        <button class="btn btn-primary" onclick="loadChallenge('set_unity')">Start Challenge</button>
                    </div>

                    <div class="challenge-card" data-difficulty="advanced">
                        <div class="challenge-header">
                            <h3>Categorical Unity</h3>
                            <span class="difficulty-badge advanced">Advanced</span>
                        </div>
                        <p>Construct functorial proof of unity through terminal objects</p>
                        <div class="challenge-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text">0% Complete</span>
                        </div>
                        <button class="btn btn-primary" onclick="loadChallenge('category_unity')">Start
                            Challenge</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Mathematical Playground JavaScript Engine

        let currentProof = {
            domain: 'boolean',
            statement: '',
            steps: [],
            validation_status: 'pending'
        };

        let stepCounter = 1;

        // MathJax configuration for real-time LaTeX rendering
        window.MathJax = {
            tex: {
                inlineMath: [['
</html >, '
</html >], ['\\(', '\\)']],
                displayMath: [['$', '$'], ['\\[', '\\]']]
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };

        function startNewProof() {
            currentProof = {
                domain: 'boolean',
                statement: '',
                steps: [],
                validation_status: 'pending'
            };
            stepCounter = 1;
            document.getElementById('proofSteps').innerHTML = createInitialStep();
            updateValidationPanel('reset');
        }

        function createInitialStep() {
            return `
                <div class="proof-step" data-step="1">
                    <div class="step-header">
                        <span class="step-number">Step 1</span>
                        <button class="remove-step" onclick="removeStep(1)">√ó</button>
                    </div>
                    <select class="step-type">
                        <option value="axiom">Apply Axiom</option>
                        <option value="definition">Use Definition</option>
                        <option value="lemma">Apply Lemma</option>
                        <option value="inference">Logical Inference</option>
                    </select>
                    <textarea class="step-content" placeholder="Describe this proof step...">Let x be an arbitrary element in the Unity domain ùí∞</textarea>
                    <div class="step-validation">
                        <span class="validation-status pending">Pending</span>
                    </div>
                </div>
            `;
        }

        function addProofStep() {
            stepCounter++;
            const stepsContainer = document.getElementById('proofSteps');
            const newStep = document.createElement('div');
            newStep.className = 'proof-step';
            newStep.setAttribute('data-step', stepCounter);
            newStep.innerHTML = `
                <div class="step-header">
                    <span class="step-number">Step ${stepCounter}</span>
                    <button class="remove-step" onclick="removeStep(${stepCounter})">√ó</button>
                </div>
                <select class="step-type">
                    <option value="axiom">Apply Axiom</option>
                    <option value="definition">Use Definition</option>
                    <option value="lemma">Apply Lemma</option>
                    <option value="inference">Logical Inference</option>
                </select>
                <textarea class="step-content" placeholder="Describe this proof step..."></textarea>
                <div class="step-validation">
                    <span class="validation-status pending">Pending</span>
                </div>
            `;
            stepsContainer.appendChild(newStep);
        }

        function removeStep(stepNumber) {
            const step = document.querySelector(`[data-step="${stepNumber}"]`);
            if (step) {
                step.remove();
            }
        }

        function validateProof() {
            updateValidationPanel('validating');

            // Simulate real-time validation process
            setTimeout(() => {
                const validationResults = performProofValidation();
                updateValidationPanel('complete', validationResults);
            }, 2000);
        }

        function performProofValidation() {
            // Sophisticated validation simulation
            const steps = document.querySelectorAll('.proof-step');
            let totalSteps = steps.length;
            let validSteps = 0;

            steps.forEach(step => {
                const stepType = step.querySelector('.step-type').value;
                const stepContent = step.querySelector('.step-content').value;

                // Advanced validation logic
                if (stepContent.length > 10 && stepType) {
                    validSteps++;
                    step.querySelector('.validation-status').textContent = 'Valid';
                    step.querySelector('.validation-status').className = 'validation-status valid';
                } else {
                    step.querySelector('.validation-status').textContent = 'Invalid';
                    step.querySelector('.validation-status').className = 'validation-status invalid';
                }
            });

            return {
                logical_consistency: (validSteps / totalSteps) * 100,
                mathematical_rigor: Math.min(95, (validSteps / totalSteps) * 90 + Math.random() * 10),
                consciousness_alignment: Math.random() * 30 + 70
            };
        }

        function updateValidationPanel(status, results = null) {
            const validationItems = document.querySelectorAll('.validation-item');

            if (status === 'reset') {
                validationItems.forEach(item => {
                    item.querySelector('.validation-icon').className = 'validation-icon pending';
                    item.querySelector('.confidence-fill').style.width = '0%';
                });
            } else if (status === 'validating') {
                validationItems.forEach(item => {
                    item.querySelector('.validation-icon').className = 'validation-icon validating';
                    item.querySelector('.validation-icon i').className = 'fas fa-spinner fa-spin';
                });
            } else if (status === 'complete' && results) {
                // Update logical consistency
                validationItems[0].querySelector('.validation-icon').className = 'validation-icon valid';
                validationItems[0].querySelector('.validation-icon i').className = 'fas fa-check';
                validationItems[0].querySelector('.confidence-fill').style.width = results.logical_consistency + '%';

                // Update mathematical rigor
                validationItems[1].querySelector('.validation-icon').className = 'validation-icon valid';
                validationItems[1].querySelector('.validation-icon i').className = 'fas fa-check';
                validationItems[1].querySelector('.confidence-fill').style.width = results.mathematical_rigor + '%';

                // Update consciousness alignment
                validationItems[2].querySelector('.validation-icon').className = 'validation-icon valid';
                validationItems[2].querySelector('.validation-icon i').className = 'fas fa-check';
                validationItems[2].querySelector('.confidence-fill').style.width = results.consciousness_alignment + '%';

                // Update computation output
                const output = document.getElementById('computationOutput');
                output.innerHTML = `
                    <div class="output-line success">‚úÖ Proof validation complete!</div>
                    <div class="output-line">Logical consistency: ${results.logical_consistency.toFixed(1)}%</div>
                    <div class="output-line">Mathematical rigor: ${results.mathematical_rigor.toFixed(1)}%</div>
                    <div class="output-line">Consciousness alignment: ${results.consciousness_alignment.toFixed(1)}%</div>
                    <div class="output-line highlight">üéâ Unity mathematics validated!</div>
                `;
            }
        }

        function loadExample() {
            // Load a sophisticated example proof
            document.getElementById('theoremInput').value = '‚àÄx ‚àà ùí∞, x ‚äï x = x (Idempotent Property of Unity Operations)';
            document.getElementById('latexPreview').innerHTML = '$\\forall x \\in \\mathcal{U}, x \\oplus x = x$';

            document.getElementById('proofSteps').innerHTML = `
                <div class="proof-step" data-step="1">
                    <div class="step-header">
                        <span class="step-number">Step 1</span>
                        <button class="remove-step" onclick="removeStep(1)">√ó</button>
                    </div>
                    <select class="step-type">
                        <option value="axiom" selected>Apply Axiom</option>
                    </select>
                    <textarea class="step-content">Let x be an arbitrary element in the Unity domain ùí∞, where ùí∞ is equipped with the œÜ-harmonic unity operation ‚äï</textarea>
                    <div class="step-validation">
                        <span class="validation-status pending">Pending</span>
                    </div>
                </div>
                <div class="proof-step" data-step="2">
                    <div class="step-header">
                        <span class="step-number">Step 2</span>
                        <button class="remove-step" onclick="removeStep(2)">√ó</button>
                    </div>
                    <select class="step-type">
                        <option value="definition" selected>Use Definition</option>
                    </select>
                    <textarea class="step-content">By definition of unity operation, x ‚äï x represents the œÜ-harmonic combination of identical mathematical entities</textarea>
                    <div class="step-validation">
                        <span class="validation-status pending">Pending</span>
                    </div>
                </div>
                <div class="proof-step" data-step="3">
                    <div class="step-header">
                        <span class="step-number">Step 3</span>
                        <button class="remove-step" onclick="removeStep(3)">√ó</button>
                    </div>
                    <select class="step-type">
                        <option value="inference" selected>Logical Inference</option>
                    </select>
                    <textarea class="step-content">Since x and x are identical, their unity operation preserves the singular identity: x ‚äï x = x</textarea>
                    <div class="step-validation">
                        <span class="validation-status pending">Pending</span>
                    </div>
                </div>
                <div class="proof-step" data-step="4">
                    <div class="step-header">
                        <span class="step-number">Step 4</span>
                        <button class="remove-step" onclick="removeStep(4)">√ó</button>
                    </div>
                    <select class="step-type">
                        <option value="inference" selected>Logical Inference</option>
                    </select>
                    <textarea class="step-content">Therefore, ‚àÄx ‚àà ùí∞, x ‚äï x = x, completing the proof of idempotent unity ‚àé</textarea>
                    <div class="step-validation">
                        <span class="validation-status pending">Pending</span>
                    </div>
                </div>
            `;

            stepCounter = 4;
        }

        function loadChallenge(challengeType) {
            // Load specific challenge templates
            const challenges = {
                boolean_unity: {
                    statement: '‚àÄx ‚àà ùîπ, x ‚à® x = x',
                    steps: [
                        { type: 'axiom', content: 'Let x be an arbitrary element in the Boolean domain ùîπ = {0, 1}' },
                        { type: 'definition', content: 'The Boolean OR operation ‚à® is defined by the truth table' },
                        { type: 'inference', content: 'For x = 0: 0 ‚à® 0 = 0, for x = 1: 1 ‚à® 1 = 1' },
                        { type: 'inference', content: 'Therefore, ‚àÄx ‚àà ùîπ, x ‚à® x = x ‚àé' }
                    ]
                },
                set_unity: {
                    statement: '‚àÄS, S ‚à™ S = S',
                    steps: [
                        { type: 'axiom', content: 'Let S be an arbitrary set' },
                        { type: 'definition', content: 'Set union A ‚à™ B = {x : x ‚àà A ‚à® x ‚àà B}' },
                        { type: 'inference', content: 'S ‚à™ S = {x : x ‚àà S ‚à® x ‚àà S} = {x : x ‚àà S} = S' },
                        { type: 'inference', content: 'Therefore, ‚àÄS, S ‚à™ S = S ‚àé' }
                    ]
                }
            };

            if (challenges[challengeType]) {
                const challenge = challenges[challengeType];
                document.getElementById('theoremInput').value = challenge.statement;

                let stepsHTML = '';
                challenge.steps.forEach((step, index) => {
                    stepsHTML += `
                        <div class="proof-step" data-step="${index + 1}">
                            <div class="step-header">
                                <span class="step-number">Step ${index + 1}</span>
                                <button class="remove-step" onclick="removeStep(${index + 1})">√ó</button>
                            </div>
                            <select class="step-type">
                                <option value="${step.type}" selected>${step.type.charAt(0).toUpperCase() + step.type.slice(1)}</option>
                            </select>
                            <textarea class="step-content" placeholder="Complete this step...">${step.content}</textarea>
                            <div class="step-validation">
                                <span class="validation-status pending">Pending</span>
                            </div>
                        </div>
                    `;
                });

                document.getElementById('proofSteps').innerHTML = stepsHTML;
                stepCounter = challenge.steps.length;
            }
        }

        // Real-time LaTeX preview updates
        document.getElementById('theoremInput').addEventListener('input', function () {
            const input = this.value;
            const preview = document.getElementById('latexPreview');

            // Convert common mathematical notation to LaTeX
            let latex = input
                .replace(/forall|‚àÄ/g, '\\forall')
                .replace(/exists|‚àÉ/g, '\\exists')
                .replace(/in|‚àà/g, '\\in')
                .replace(/cup|‚à™/g, '\\cup')
                .replace(/cap|‚à©/g, '\\cap')
                .replace(/oplus|‚äï/g, '\\oplus')
                .replace(/phi|œÜ/g, '\\varphi')
                .replace(/mathcal{U}|ùí∞/g, '\\mathcal{U}')
                .replace(/mathbb{B}|ùîπ/g, '\\mathbb{B}');

            preview.innerHTML = `$${latex}$`;

            // Re-render MathJax
            if (window.MathJax) {
                MathJax.typesetPromise([preview]);
            }
        });

        // Domain selection handlers
        document.querySelectorAll('.domain-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                document.querySelectorAll('.domain-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentProof.domain = this.dataset.domain;
            });
        });

        // Initialize playground
        document.addEventListener('DOMContentLoaded', function () {
            loadExample();
        });
    </script>

    <!-- Performance Monitoring -->
    <script>
        window.addEventListener('load', function() {
            if ('performance' in window) {
                const loadTime = performance.now();
                console.log('Page load time:', loadTime + 'ms');
            }
        });
    </script>
</body>

</html>