<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced AI Chat System Test - Unity Mathematics Institute</title>
    <style>
        body {
            font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0A0A0F;
            color: #FFFFFF;
            margin: 0;
            padding: 2rem;
            line-height: 1.6;
        }

        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(18, 18, 26, 0.9);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 15px;
            padding: 2rem;
        }

        .test-title {
            color: #FFD700;
            text-align: center;
            margin-bottom: 2rem;
        }

        .test-section {
            margin-bottom: 2rem;
            padding: 1rem;
            background: rgba(26, 26, 37, 0.5);
            border-radius: 10px;
        }

        .test-button {
            background: linear-gradient(135deg, #FFD700, #00D4FF);
            border: none;
            border-radius: 8px;
            padding: 0.75rem 1.5rem;
            color: #0A0A0F;
            cursor: pointer;
            margin: 0.5rem;
            font-weight: 600;
        }

        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }

        .status {
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .status.success {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.3);
            color: #00FF00;
        }

        .status.error {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.3);
            color: #FF6B6B;
        }

        .status.info {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            color: #00D4FF;
        }

        .log {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
            margin: 1rem 0;
        }
    </style>
    <!-- Unified Navigation System - Meta-Optimal One-Line Solution -->
    <script src="js/nav-template-applier.js" defer></script>
</head>

<body>
    <div class="test-container">
        <h1 class="test-title">Enhanced AI Chat System Test</h1>

        <div class="test-section">
            <h3>System Status</h3>
            <div id="system-status" class="status info">Initializing...</div>
            <button class="test-button" onclick="checkSystemStatus()">Check System Status</button>
        </div>

        <div class="test-section">
            <h3>JavaScript Module Loading</h3>
            <div id="module-status" class="status info">Checking modules...</div>
            <button class="test-button" onclick="checkModules()">Check Modules</button>
        </div>

        <div class="test-section">
            <h3>API Endpoints</h3>
            <div id="api-status" class="status info">Testing API endpoints...</div>
            <button class="test-button" onclick="testAPIEndpoints()">Test API Endpoints</button>
        </div>

        <div class="test-section">
            <h3>Chat System Initialization</h3>
            <div id="chat-status" class="status info">Initializing chat systems...</div>
            <button class="test-button" onclick="testChatSystems()">Test Chat Systems</button>
        </div>

        <div class="test-section">
            <h3>Consciousness Field Integration</h3>
            <div id="consciousness-status" class="status info">Testing consciousness field...</div>
            <button class="test-button" onclick="testConsciousnessField()">Test Consciousness Field</button>
        </div>

        <div class="test-section">
            <h3>Test Log</h3>
            <div id="test-log" class="log"></div>
            <button class="test-button" onclick="clearLog()">Clear Log</button>
        </div>

        <div class="test-section">
            <h3>Quick Actions</h3>
            <button class="test-button" onclick="runFullTest()">Run Full Test Suite</button>
            <button class="test-button" onclick="openMetastationHub()">Open Metastation Hub</button>
            <button class="test-button" onclick="openMainSite()">Open Main Site</button>
        </div>
    </div>

    <!-- Load all required JavaScript modules -->
    <script src="js/config.js"></script>
    <script src="js/unified-chatbot-system.js" defer></script>
    <script src="js/consciousness-field-engine.js"></script>
    <script src="js/phi-harmonic-consciousness-engine.js"></script>

    <script src="js/consciousness-field-webgl-renderer.js"></script>
    <script src="js/quantum-unity-enhanced.js"></script>
    <script src="js/consciousness-field-3d-enhanced.js"></script>
    <script src="js/golden-ratio-3d-enhanced.js"></script>
    <script src="js/unity-core.js"></script>
    <script src="js/accessibility-enhancements.js"></script>
    <script src="js/performance-optimizer.js"></script>
    <script src="js/error-handler.js"></script>
    <script src="js/seo-optimizer.js"></script>
    <script src="js/unified-search-system.js"></script>
    <script src="js/semantic-search.js"></script>
    <script src="js/master-integration-system.js"></script>
    <script src="js/meta-optimal-integration.js"></script>
    <script src="js/landing-integration-manager.js"></script>
    <script src="js/landing-image-slider.js"></script>
    <script src="js/unity-fractal-mandelbrot.js"></script>
    <script src="js/unity-neural-network.js"></script>
    <script src="js/unity-quantum-entanglement.js"></script>
    <script src="js/meta-rl-visualization.js"></script>
    <script src="js/euler-identity-interactive.js"></script>
    <script src="js/unity-manifolds-topology.js"></script>
    <script src="js/idempotent-proof-interactive.js"></script>
    <script src="js/unity-proofs-interactive.js"></script>
    <script src="js/citation-builder.js"></script>
    <script src="js/quantum-ants.js"></script>
    <script src="js/discreet-audio-system.js"></script>
    <script src="js/unity-audio-system.js"></script>
    <script src="js/enhanced-unity-experience.js"></script>
    <script src="js/enhanced-unity-integration.js"></script>
    <script src="js/katex-integration.js"></script>
    <script src="js/mathematical-highlights.js"></script>
    <script src="js/code-showcase.js"></script>
    <script src="js/playground.js"></script>
    <script src="js/publications.js"></script>
    <script src="js/research.js"></script>
    <script src="js/unity-demo.js"></script>
    <script src="js/main.js"></script>

    <script>
        // Test utilities
        function log(message, type = 'info') {
            const logDiv = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.style.color = type === 'error' ? '#FF6B6B' : type === 'success' ? '#00FF00' : '#00D4FF';
            logEntry.textContent = `[${timestamp}] ${message}`;
            logDiv.appendChild(logEntry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function updateStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status ${type}`;
        }

        function clearLog() {
            document.getElementById('test-log').innerHTML = '';
        }

        // Test functions
        function checkSystemStatus() {
            log('Checking system status...');

            const status = {
                userAgent: navigator.userAgent,
                language: navigator.language,
                cookieEnabled: navigator.cookieEnabled,
                onLine: navigator.onLine,
                platform: navigator.platform,
                screenResolution: `${screen.width}x${screen.height}`,
                windowSize: `${window.innerWidth}x${window.innerHeight}`,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
            };

            log(`System Status: ${JSON.stringify(status, null, 2)}`);
            updateStatus('system-status', 'System status checked successfully', 'success');
        }

        function checkModules() {
            log('Checking JavaScript modules...');

            const modules = [
                'EnhancedEenAIChat',
                'TranscendentalConsciousnessChat',
                'FloatingChatButton',
                'PersistentChatSystem',
                'AIChatModal',
                'UnityAIChat',
                'QuantumUnityEnhanced',
                'ConsciousnessField3DEnhanced',
                'GoldenRatio3DEnhanced',
                'UnityCore',
                'MasterIntegrationSystem',
                'MetaOptimalIntegration',
                'LandingIntegrationManager',
                'AccessibilityEnhancements',
                'PerformanceOptimizer',
                'ErrorHandler',
                'SEOOptimizer',
                'UnifiedSearchSystem',
                'SemanticSearch'
            ];

            const loadedModules = [];
            const missingModules = [];

            modules.forEach(module => {
                if (typeof window[module] !== 'undefined') {
                    loadedModules.push(module);
                    log(`✅ ${module} loaded successfully`);
                } else {
                    missingModules.push(module);
                    log(`❌ ${module} not found`, 'error');
                }
            });

            const status = `Loaded: ${loadedModules.length}/${modules.length} modules`;
            updateStatus('module-status', status, missingModules.length === 0 ? 'success' : 'error');
        }

        async function testAPIEndpoints() {
            log('Testing API endpoints...');

            const endpoints = [
                '/api/agents/chat',
                '/api/openai/chat',
                '/api/code-search/search',
                '/api/nouri-knowledge/query',
                '/api/openai/images/generate',
                '/api/openai/tts'
            ];

            for (const endpoint of endpoints) {
                try {
                    const response = await fetch(endpoint, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: 'Test message',
                            test: true
                        })
                    });

                    if (response.ok) {
                        log(`✅ ${endpoint} - OK (${response.status})`);
                    } else {
                        log(`⚠️ ${endpoint} - ${response.status} ${response.statusText}`, 'error');
                    }
                } catch (error) {
                    log(`❌ ${endpoint} - ${error.message}`, 'error');
                }
            }

            updateStatus('api-status', 'API endpoints tested', 'info');
        }

        function testChatSystems() {
            log('Testing chat system initialization...');

            try {
                // Test Enhanced Een AI Chat
                if (typeof EnhancedEenAIChat !== 'undefined') {
                    const enhancedChat = new EnhancedEenAIChat({
                        enableStreaming: false,
                        enableAnimations: false
                    });
                    log('✅ Enhanced Een AI Chat initialized');
                }

                // Test Transcendental Consciousness Chat
                if (typeof TranscendentalConsciousnessChat !== 'undefined') {
                    const consciousnessChat = new TranscendentalConsciousnessChat({
                        consciousness_threshold: 0.618
                    });
                    log('✅ Transcendental Consciousness Chat initialized');
                }

                // Test Floating Chat Button
                if (typeof FloatingChatButton !== 'undefined') {
                    const floatingButton = new FloatingChatButton({
                        position: 'bottom-right'
                    });
                    log('✅ Floating Chat Button initialized');
                }

                updateStatus('chat-status', 'Chat systems tested successfully', 'success');

            } catch (error) {
                log(`❌ Chat system test failed: ${error.message}`, 'error');
                updateStatus('chat-status', 'Chat system test failed', 'error');
            }
        }

        function testConsciousnessField() {
            log('Testing consciousness field integration...');

            try {
                // Test consciousness field engine
                if (typeof ConsciousnessFieldEngine !== 'undefined') {
                    const canvas = document.createElement('canvas');
                    canvas.id = 'test-consciousness-canvas';
                    canvas.width = 400;
                    canvas.height = 300;
                    document.body.appendChild(canvas);

                    const engine = new ConsciousnessFieldEngine('test-consciousness-canvas');
                    log('✅ Consciousness Field Engine initialized');

                    // Clean up
                    document.body.removeChild(canvas);
                }

                // Test phi-harmonic consciousness engine
                if (typeof PhiHarmonicConsciousnessEngine !== 'undefined') {
                    const phiEngine = new PhiHarmonicConsciousnessEngine();
                    log('✅ Phi-Harmonic Consciousness Engine initialized');
                }

                updateStatus('consciousness-status', 'Consciousness field tested successfully', 'success');

            } catch (error) {
                log(`❌ Consciousness field test failed: ${error.message}`, 'error');
                updateStatus('consciousness-status', 'Consciousness field test failed', 'error');
            }
        }

        function runFullTest() {
            log('Running full test suite...');

            checkSystemStatus();
            setTimeout(() => checkModules(), 500);
            setTimeout(() => testAPIEndpoints(), 1000);
            setTimeout(() => testChatSystems(), 1500);
            setTimeout(() => testConsciousnessField(), 2000);

            log('Full test suite completed');
        }

        function openMetastationHub() {
            window.open('metastation-hub.html', '_blank');
        }

        function openMainSite() {
            window.open('index.html', '_blank');
        }

        // Auto-run basic tests on page load
        document.addEventListener('DOMContentLoaded', () => {
            log('Enhanced AI Chat System Test Page Loaded');
            setTimeout(() => {
                checkSystemStatus();
                checkModules();
            }, 1000);
        });
    </script>
</body>

</html>